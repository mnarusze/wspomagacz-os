
LoadModule dav_svn_module     modules/mod_dav_svn.so
LoadModule authz_svn_module   modules/mod_authz_svn.so

#
# Example configuration to enable HTTP access for a directory
# containing Subversion repositories, "/var/www/svn".  Each repository
# must be readable and writable by the 'apache' user.  Note that if
# SELinux is enabled, the repositories must be labelled with a context
# which httpd can write to; this will happen by default for
# directories created in /var/www.  Use "restorecon -R /var/www/svn"
# to label the repositories if upgrading from a previous release.
#

#
# To create a new repository "http://localhost/repos/stuff" using
# this configuration, run as root:
#
#   # cd /var/www/svn
#   # svnadmin create stuff   
#   # chown -R apache.apache stuff
#

#Alias /repos "/var/www/svn"

<Location /repos>
  DAV svn
  SVNParentPath /var/www/svn
  #SVNListParentPath on


#wymusza ssl jak wchodzimy przez http
  RewriteEngine On
  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

#   SSLRequireSSL

  AuthType Basic
  AuthName "Repozytoria SVN katedry KASK wydzialu ETI PG"
  AuthBasicProvider ldap file
#   AuthLDAPURL "ldap://db.eti.pg.gda.pl/ou=_USERS_,dc=eti,dc=pg,dc=gda,dc=pl?uid?sub?(objectClass=*)"
  AuthLDAPURL "ldap://apl01.eti.pg.gda.pl:389/CN=Users,DC=kasklab,DC=kask,DC=eti,DC=pg,DC=gda,DC=pl?sAMAccountName?sub?(objectClass=*)" NONE
  AuthLDAPBindDN "CN=linux-ldap-user,CN=Users,DC=kasklab,DC=kask,DC=eti,DC=pg,DC=gda,DC=pl"
  AuthLDAPBindPassword haslo

#to mowi apachowi ze moze probowac innych zrodel niz AD
  authzldapauthoritative Off

#alternatywne uwierzytelnianie spoza AD
  AuthUserFile /etc/httpd/svn.pas
  Require valid-user

#sterowanie kto co moze
  AuthzSVNAccessFile /etc/httpd/svn.access
</Location>
